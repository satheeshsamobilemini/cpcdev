<apex:page controller="QuickQuoteSalesController" tabStyle="MMI_Quotes__c" id="quickquote" standardstylesheets="true" action="{!QuickQuoteSalesController_initalize}">
<apex:sectionHeader title="Quick Quote" ></apex:sectionHeader>
<apex:includeScript value="{!$Resource.jQueryLib19Compress}"/>
<apex:includeScript value="{!$Resource.Mobile_Mini_Resource}"/>
<apex:includeScript value="/soap/ajax/10.0/connection.js"/>
<apex:includeScript value="/soap/ajax/10.0/apex.js"/>
<apex:includeScript value="/support/console/26.0/integration.js"/> 

<style type="text/css">

.borderbox {
    border: 1px solid black;  
    width: 87%;
    height: 120%;
    position: relative;
    left: 30px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px; 
    "
}

.popupborderbox {
    border: 1px solid black;
    width: 80%;
    height: 50%;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    
}

.custPopup {
   background-color: #FCFAFC;
               border-width: 2px;
               z-index: 9999;
               left: 50%;
               padding:10px;
               position: absolute;
               border: 1px solid #DA9627;
               width: 750px;
               margin-left: -250px;
               top:90px;
               border-top-style:outset;
               border-top-width:20px;
               border-top-color: #DA9627;
               -webkit-border-radius: 5px;
               -moz-border-radius: 5px;
               border-radius: 5px;
               -moz-border-radius:10px;
               -moz-box-shadow: -2px -2px 10px rgba(0,0,0,.25) inset, 2px 2px 10px white inset;
               border-radius: 15px;
}

.popupBackground {
   background-color:black;
               opacity: 0.20;
               filter: alpha(opacity = 20);
               position: absolute;
               width: 100%;
               height: 100%;
               top: 0;
               left: 0;
               z-index: 9998;
}

.popupBackground1 {
   background-color:black;
               opacity: 0.20;
               filter: alpha(opacity = 20);
               position: absolute;
               width: 50%;
               height: 100%;
               top: 0;
               left: 0;
               z-index: 9998;
}

.popupborderbox1 {
    border: 1px solid black;
    width: 80%;
    height: 50%;
    -moz-border-radius: 0px;
    -webkit-border-radius: 0px;
    border-radius: 0px;
    "
}

.custPopup12 {
   background-color: #FCFAFC;
               border-width: 2px;
               z-index: 9999;
               left: 50%;border: 1px solid #DA9627;
               padding:10px;
               position: absolute;
               width: 100px;
               margin-left: -50px;
               top:190px;
               border-top-style:outset;
               -webkit-border-radius: 5px;
               -moz-border-radius: 5px; 
               border-radius: 5px;
               -moz-border-radius:10px;
               -moz-box-shadow: -2px -2px 10px rgba(0,0,0,.25) inset, 2px 2px 10px white inset;
               border-radius: 15px;
}

.custPopup1 {
   background-color: #FCFAFC;
               border-width: 2px;
               z-index: 9999;
               left: 50%;
               padding:10px;border: 1px solid #DA9627;
               position: absolute;
               width: 750px;
               margin-left: -250px;
               top:90px;
               border-top-style:outset;
               border-top-width:20px;
               border-top-color: #DA9627;
               -webkit-border-radius: 5px;
               -moz-border-radius: 5px;
               border-radius: 5px;
               -moz-border-radius:10px;
               -moz-box-shadow: -2px -2px 10px rgba(0,0,0,.25) inset, 2px 2px 10px white inset;
               border-radius: 15px;
}

.popupBackground1 {
    background-color:black;
               opacity: 0.20;
               filter: alpha(opacity = 20);
               position: absolute;
               width: 100%;
               height: 100%;
               top: 0;
               left: 0;
               z-index: 9998;
}

.popupborderbox2 {
    border: 1px solid black;
    width: 100%;
    height: 100%;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    
}

.custDescAddressPopup {
   background-color: #FCFAFC;
               border-width: 2px;
               z-index: 9999;
               left: 50%;
               padding:10px;
               position: absolute;
               width: 750px;border: 1px solid #DA9627;
               margin-left: -250px;
               top:90px;
               border-top-style:outset;
               border-top-width:20px;
               border-top-color: #DA9627;
               -webkit-border-radius: 5px;
               -moz-border-radius: 5px;
               border-radius: 5px;
               -moz-border-radius:10px;
               -moz-box-shadow: -2px -2px 10px rgba(0,0,0,.25) inset, 2px 2px 10px white inset;
               border-radius: 15px;
}

.DescAddresspopupBackground {
    background-color:black;
               opacity: 0.20;
               filter: alpha(opacity = 20);
               position: absolute;
               width: 100%;
               height: 100%;
               top: 0;
               left: 0;
               z-index: 9998;
}
</style>

<script language="javascript" type="text/javascript">
      function stopRKey(evt) {
         var evt = (evt) ? evt : ((event) ? event : null);
         var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
         if ((evt.keyCode == 13) && (node.type=="text")) {
            return false;
         }
      }
      
document.onkeypress = stopRKey; 
</script>

<script type="text/javascript">
         /*$(document).ready(function() {
           // document.getElementById('descreteAddDiv').style.display = 'none';
            callwscountry();
 
        });*/
    //window.onload=function(){callwscountry();};
  // Hide/Out Descrete Add Pop Up
  /*if (sforce.console.isInConsole()) {
         //alert('console');
         window.onload=function(){callwscountry();};
   }else{
    //alert('page');
        $(document).ready(function() {
            // Code that uses jQuery's $ can follow here.
            callwscountry();
        });
   }*/
   
   var previousOnload = window.onload;
  window.onload = function() {
   if (previousOnload) {
    previousOnload(); 
   } 
   callwscountry();
   //alert('loading...');
  }
 
   function openRecord(recId){
        if(sforce.console.isInConsole()){
            //alert('console');
            openSfdcRec(recId);
        }else{
            //alert('page');
            window.open('/'+recId,'_blank');
        }
        
  }
  
  function openSfdcRec(recordId){
        sforce.console.getFocusedPrimaryTabId(function showTabId(result) {
         result.calledUrl = '/'+recordId;
         var primaryTabId = result.id;
         sforce.console.openSubtab(primaryTabId , result.calledUrl, true, 
             '', null,openSuccess, 'salesforceSubtab');
     });
     var openSuccess = function openSuccess(result) {
     };
  }
 
 function hideshowDescretePopUp(id)
 {
   SelectFulfillingBranch();
    document.getElementById(id).style.display = 'block';
    
 }
  function hideshowDescretePopUpHide(id)
 {
    document.getElementById(id).style.display = 'none';
    HideSelectBranch();
    
 }
 
 function showTaxPopUp()
 {

    document.getElementById('descreteAddDiv').style.display = 'none';
    document.getElementById('TaxDiv').style.display = 'block';
    
 }
 
 function hideTaxPopUp()
 {

    document.getElementById('TaxDiv').style.display = 'none';
    TaxPopUpCancel();
 }
 
 function hideTaxPopUpSave()
 {
    document.getElementById('TaxDiv').style.display = 'none';
    //TaxPopUpSave();
 }
 
 function branchShow()
 {
    document.getElementById('branchsearch').style.display = 'block';
    showdispBranchPopUp();
 }
 
 function hideBranchSearch()
 {
    document.getElementById('branchsearch').style.display = 'none';
    hidedispBranchPopUp();
 }
 
 function selectedBranchId()
 {
    document.getElementById('branchsearch').style.display = 'none';
   //SelectedBranchMethod();
    
 }
 function increse(serialNo)
 {
     if(serialNo == '2'){
        var v = document.getElementById('quickquote:formId:lockblock:locksection:locksec:lock').value;
     }else{
        var v = document.getElementById('quickquote:formId:lockblock:locksection:qtysec:qty').value;
     }
      if(v==''){
          v='0';
      }
      if(parseInt(v)<99){
      if(serialNo == '2'){
        document.getElementById('quickquote:formId:lockblock:locksection:locksec:lock').value = parseInt(v) + 1;
      }else{
        document.getElementById('quickquote:formId:lockblock:locksection:qtysec:qty').value = parseInt(v) + 1;
      }
     }
     if(serialNo != '1'){
        disableSaveButton();
    }
           
}
   function decrese(serialNo)
   {
       if(serialNo == '2'){
            var v = document.getElementById('quickquote:formId:lockblock:locksection:locksec:lock').value;
       }else{
            var v = document.getElementById('quickquote:formId:lockblock:locksection:qtysec:qty').value;
       }
       if(v==''){
           v='0';
       }
       if(v!='0')
       {
           if(serialNo == '2'){
                document.getElementById('quickquote:formId:lockblock:locksection:locksec:lock').value = parseInt(v) - 1;
           }else{
                document.getElementById('quickquote:formId:lockblock:locksection:qtysec:qty').value = parseInt(v) - 1;
           }
       }
       if(serialNo != '1'){
        disableSaveButton();
     }
   }

 
 function showProductSearch()
 {
    document.getElementById('ProductSearchId').style.display = 'block';
    ProductsSelection();  
 }
 
  function hideProductSearch()
 {
    document.getElementById('ProductSearchId').style.display = 'none';
    CloseProductPopUp();
 }
  function hideProductSearchOK()
 {
    document.getElementById('ProductSearchId').style.display = 'none';
    SelectedProduct();
 }
 
       function onlyNumbers(evt)
        {
            var e = evt
            if(window.event)
            { // IE 
                var charCode = e.keyCode;
            } 
            else if (e.which)
            { // Safari 4, Firefox 3.0.4
                var charCode = e.which
            }
            if (charCode > 31 && (charCode < 48 || charCode > 57))
                return false;
                return true;
        }
 
 
 
      function isValidPostalCode() {
         var p =document.getElementById('quickquote:formId:lockblock:shippingadd:zipsec:zipCode').value;
         var v =document.getElementById('quickquote:formId:lockblock:shippingadd:contsec:countries').value;
         
        switch (v) {
        case "USA":
            postalCodeRegex = /^$|^\d{5}((\-)?\d{4})?$/;
            break;
        case "CAN":
            postalCodeRegex = /^$|^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/;
            break;
        default:
            postalCodeRegex = /^$|^(?:[A-Z0-9]+([- ]?[A-Z0-9]+)*)?$/;
        }

        return postalCodeRegex.test(p);
        }
        
        function isValidAddress() {
         var p =document.getElementById('quickquote:formId:lockblock:shippingadd:addSec:addId').value;
         addressRegex = /^$|^[a-zA-z0-9\,\.\-\'\#\&\/ ]+$/;
        return addressRegex.test(p); 
        }
        
        function isValidTransactionType() {
        
         var t =document.getElementById('quickquote:formId:lockblock:typeselectid:ttypesec:trasSecId').value;
          if(t!="-None-" && t!=""){
            return true;
          }else{
            return false;
          }

        }
        
        function isValidCrossStreet() {
         var p =document.getElementById('quickquote:formId:lockblock:shippingadd:crossPBId:crossfId').value;
         addressRegex = /^$|^[a-zA-z0-9\,\.\-\'\#\&\/ ]+$/;
        return addressRegex.test(p);
        }

         function PostalCodevalidate() {
                    if(isValidTransactionType()){
                            if(isValidPostalCode()){
                                 document.getElementById('ZipError').style.display = 'none';
                                 document.getElementById('ttypeError').style.display = 'none';
                                 hideshowDescretePopUp('descreteAddDiv');
                                 }else{
                                    document.getElementById('ttypeError').style.display = 'none';
                                document.getElementById('ZipError').style.display = 'block';
                         }
                    }else{
                        document.getElementById('ttypeError').style.display = 'block';
                        document.getElementById('ZipError').style.display = 'none';
                    }
        }
        
        function onTransactionChange()
         {
          makeAddAvailable();
       
         }
         function ontypeChange(){
            //ontypeChangevalue();
         }
         
         
           function getSelectedRowValueAdd(x,inputId,Id,tableId)
        {
            document.getElementById(Id).value = inputId;
            
            var tbl = document.getElementById(tableId);
 
           for (var i = 0; i < tbl.rows.length; i++) {                
                   tbl.rows[i].style.backgroundColor = "#F2F2F2";
           }  
           tbl.rows[parseInt(x)].style.backgroundColor = "#CEECF5";  
          // colorChangeFun(x);
            
        }
        function getSelectedRowValueAddondblclick(x,inputId,Id,tableId)
        {
            document.getElementById(Id).value = inputId;
            FulfillingBranchSelected();
            showTaxPopUp();
        }
        
        
        
         function getSelectedRowValueTax(x,inputId,Id,tableId)
        {
            
            document.getElementById(Id).value = inputId;
            
            var tbl = document.getElementById(tableId);
 
           for (var i = 0; i < tbl.rows.length; i++) {                
                   tbl.rows[i].style.backgroundColor = "#F2F2F2";
           }  
             
           tbl.rows[parseInt(x)].style.backgroundColor = "#CEECF5";  
          // colorChangeFun(x);
            
        }
        
        function getSelectedRowValueTaxondblclick(x,inputId,Id,tableId)
        {
            
            document.getElementById(Id).value = inputId;
            SelectedAddressId();
            hideTaxPopUpSave();
                        
        }
        
        
         function getSelectedRowValueBranch(x,inputId,Id,tableId)
        {
            
            document.getElementById(Id).value = inputId;
            
            var tbl = document.getElementById(tableId);
 
           for (var i = 0; i < tbl.rows.length; i++) {                
                   tbl.rows[i].style.backgroundColor = "#F2F2F2";
           }  
             
            tbl.rows[parseInt(x)-1].style.backgroundColor = "#CEECF5";  
          // colorChangeFun(x);
            
        }
        function getSelectedRowValueBranchondblclick(x,inputId,Id,tableId)
        {
            
            document.getElementById(Id).value = inputId;
            SelectedBranchMethod();
            selectedBranchId();
            document.getElementById('quickquote:formId:lockblock:shippingadd:fulfillingBranchId:fid').focus();
            
        }
        
        
         function getSelectedRowValueProd(x,inputId,Id,tableId)
        {
            
            document.getElementById(Id).value = inputId;
            
            var tbl = document.getElementById(tableId);
 
           for (var i = 0; i < tbl.rows.length; i++) {                
                   tbl.rows[i].style.backgroundColor = "#F2F2F2";
           }  
           
       
           tbl.rows[parseInt(x)].style.backgroundColor = "#CEECF5";  
          // colorChangeFun(x);
            
        }
        function getSelectedRowValueProdondblclick(x,inputId,Id,tableId)
        {
            document.getElementById(Id).value = inputId;
            hideProductSearchOK();
            document.getElementById('quickquote:formId:lockblock:locksection:prodSec:prodinId').focus();
        }
        
        
         function productTabOff()
         {
          
          var prodcode = document.getElementById('quickquote:formId:lockblock:locksection:prodSec:prodinId').value;

          document.getElementById('prodCode').value = prodcode;
       
          if(prodcode!=''){
              document.getElementById('ProductSearchId').style.display = 'block';
          }
          
       
           getSpecificProductDetail();
           
         }
          function branchTabOff()
         {
          
          var prodcode = document.getElementById('quickquote:formId:lockblock:shippingadd:fulfillingBranchId:fid').value;

          document.getElementById('fBranchCode').value = prodcode;

           getSpecificBranchIDMethod();

         }
         
           function hideErrorMsg()
         {
    
            document.getElementById('quickquote:formId:lockblock:locksection:ClosePopPanel').style.display = 'none';
            document.getElementById('quickquote:formId:lockblock:locksection:errorPanel1').style.display = 'none';
            
            document.getElementById('quickquote:formId:lockblock:errorMsgsec').style.display = 'none';
       
         }
         
          function datechange(){
            onChangeDelivery();
         }
         
         function showCapacityPopUp(){
            document.getElementById('capacityLookupPopupId').style.display = '';
         }
         function changeRowColorInCapacityDblClk(x,inputId,Id){
            document.getElementById(Id).value = inputId;
            hideCapacityPopUp();
            okCapacityPopUp();
         }
        
         function changeRowColorInCapacity(x,inputId,Id){
            document.getElementById(Id).value = inputId;
            
            var tbl = document.getElementById("capacityLookup_grid");
             
            for (var i = 0; i < tbl.rows.length; i++) {                
                   tbl.rows[i].style.backgroundColor = "#F2F2F2";
            }       
            document.getElementById('CapacityDivEnable').style.display = '';
            document.getElementById('CapacityDivDisable').style.display = 'none';
            colorChangeFun(x);
         }
         
         function hideCancelcapacityLookupPopUp(){
            document.getElementById('capacitySelactedValue').value = '';
            document.getElementById('capacityLookupPopupId').style.display = 'none';
         }
         function hideCapacityPopUp(){
            document.getElementById('capacityLookupPopupId').style.display = 'none';
         }
         
         function colorChangeFun(x)
        {
            var newColor = '#CEECF5';
            var origColor = '#F2F2F2';
            if ( x.style ) {
            
             // x.style.backgroundColor = (newColor == x.style.backgroundColor)? origColor : newColor;
              x.style.backgroundColor =newColor;
              
             }
        }
    function DiscoverySectionValidate() {
            var Whydoyouneedstorage = document.getElementById('quickquote:formId:lockblock:DiscoverySection:WhydoyouneedstorageMain:Whydoyouneedstorage').value; 
            var Whenwillyouneedyourunit = document.getElementById('quickquote:formId:lockblock:DiscoverySection:WhenwillyouneedyourunitMain:Whenwillyouneedyourunit').value;
            var Whatwillyoubestoring = document.getElementById('quickquote:formId:lockblock:DiscoverySection:WhatwillyoubestoringMain:Whatwillyoubestoring').value;
            var Howoftenwillyouneedtoaccess = document.getElementById('quickquote:formId:lockblock:DiscoverySection:HowoftenwillyouneedtoaccessMain:Howoftenwillyouneedtoaccess').value;
            var Howlongwillyouneedyourunit = document.getElementById('quickquote:formId:lockblock:DiscoverySection:HowlongwillyouneedyourunitMain:Howlongwillyouneedyourunit').value;
            var Whoisgoingtobeaccessingyourunit = document.getElementById('quickquote:formId:lockblock:DiscoverySection:WhoisgoingtobeaccessingyourunitMain:Whoisgoingtobeaccessingyourunit').value;
 
            if(Whydoyouneedstorage == ''){
                document.getElementById('CrossSError').style.display = 'block';
                document.getElementById('quickquote:formId:lockblock:DiscoverySection:WhydoyouneedstorageMain:Whydoyouneedstorage').focus();
                return false;
            }else if(Whenwillyouneedyourunit == ''){
                document.getElementById('CrossSError').style.display = 'block';
                document.getElementById('quickquote:formId:lockblock:DiscoverySection:WhenwillyouneedyourunitMain:Whenwillyouneedyourunit').focus();
                return false;
            }
            else if(Whatwillyoubestoring == ''){
                document.getElementById('CrossSError').style.display = 'block';
                document.getElementById('quickquote:formId:lockblock:DiscoverySection:WhatwillyoubestoringMain:Whatwillyoubestoring').focus();
                return false;
            }
            else if(Howoftenwillyouneedtoaccess == '--None--'){
                document.getElementById('CrossSError').style.display = 'block';
                document.getElementById('quickquote:formId:lockblock:DiscoverySection:HowoftenwillyouneedtoaccessMain:Howoftenwillyouneedtoaccess').focus();
                return false;
            }
            else if(Howlongwillyouneedyourunit == '--None--'){
                document.getElementById('CrossSError').style.display = 'block';
                document.getElementById('quickquote:formId:lockblock:DiscoverySection:HowlongwillyouneedyourunitMain:Howlongwillyouneedyourunit').focus();
                return false;
            }
            else if(Whoisgoingtobeaccessingyourunit == ''){
                document.getElementById('CrossSError').style.display = 'block';
                document.getElementById('quickquote:formId:lockblock:DiscoverySection:WhoisgoingtobeaccessingyourunitMain:Whoisgoingtobeaccessingyourunit').focus();
                return false;
            }
            else{
                document.getElementById('CrossSError').style.display = 'none';
                saveQuickQuote();
                return true;
            }
            
         }
  </script>
     
    

    <apex:form id="formId" > 
    <apex:outputPanel id="fulfillingError">
        <apex:messages id="mainErrorMsg" styleClass="errorMsg" style="font-family:georgia,garamond,serif;" />
    </apex:outputPanel>
     
    <apex:actionFunction name="SelectedBranchMethod" action="{!SelectedBranchMethod}" status="LoadBranch"  reRender="fid, dfbId,deliveryZone, crossfId,mv1,mv2,mv3,mv4,viewBranchIdShanshort,locksection,prodsecid,modifId,deliveryDateId,RefreshButton,SaveId,suggestedPriceId,branchGid,customerTotalid,sellpId,marketId,totalTid,lockTid,errorMsgsec,addressValidateError,shippingadd"/>
    <apex:actionFunction name="FulfillingBranchSelected" action="{!FulfillingBranchSelected}" status="loginStatus"  reRender="addressValidateError,TaxDivpanelid, fid, dfbId,deliveryZone, crossfId,mv1,mv2,mv3,mv4,viewBranchIdShanshort,addId,zipCode,States,cityid " />
   <apex:actionFunction name="SelectedAddressId"  status="loginStatus"  action="{!SelectedAddressId}" reRender="TaxDivpanelid,validatebutton,prodsecid,RefreshButton,SaveId,fulfillingBranchPanel,viewBranchIdShanshort,States,cityid,noZoneBtn,noZoneBtnOP"/> 
    
    
    <apex:actionFunction name="callwscountry" action="{!LoadWBs}" status="onloadStatus"  reRender="formId"/>
    <apex:actionFunction name="HideSelectBranch" action="{!CancelFulfillingBranchSelected}" immediate="true" rerender="fulfillingBranchPanel,TaxDiv"/> 
   
    <apex:actionFunction name="TaxPopUpCancel"  status="loginStatus"  action="{!CancelSelectedAddressId}" immediate="true" rerender="TaxDivpanelid"/>
    <apex:actionFunction name="showdispBranchPopUp" action="{!showdispBranchPopUp}" immediate="true" rerender="branchSearchPanel"/>
    <apex:actionFunction name="hidedispBranchPopUp" action="{!hidedispBranchPopUp}" status="LoadBranch" immediate="true" rerender="branchSearchPanel"/>
   
<!--     <apex:actionFunction name="SelectedBranchMethod" action="{!SelectedBranchMethod}" immediate="true" reRender="fid, dfbId,deliveryZone, crossfId"/> -->
   
     <apex:actionFunction name="ProductsSelection" action="{!ProductsSelection}"  reRender="propanelid,RefreshButton,SaveId,suggestedPriceId,branchGid,customerTotalid,sellpId"/>
     <apex:actionFunction name="SelectFulfillingBranch"  action="{!SelectFulfillingBranch}" reRender="selecAdd,addressImage,fulfillingBranchPanel,TaxDivpanelid,MarketValueRange20S,MarketValueRange20ZS,MarketValueRange40S,MarketValueRange40ZS,viewBranchIdShanshort"/>
      <apex:actionFunction name="hideError"  action="{!hideError}" reRender="errorPanel1"/>
     <apex:actionFunction name="disableSaveButton"  status="QuoteRefreshStatus" action="{!disableSaveButton}" reRender="SaveId,RefreshButton"/>
      <apex:actionFunction name="onChangeDelivery"  status="QuoteRefreshStatus" action="{!onChangeDelivery}" reRender="SaveId,RefreshButton,wwynyuId"/>
      <apex:actionFunction name="CloseProductPopUp"  action="{!CloseProductPopUp}" reRender="propanelid"/>
    <!--  <apex:actionFunction name="SelectedProduct"  status="ProductSelection" action="{!SelectedProduct}" reRender="propanelid,prodsecid,ecodePanid,locksection,modifId,deliveryDateId,RefreshButton,SaveId,suggestedPriceId,branchGid,customerTotalid,sellpId,marketId,totalTid,lockTid,tcPanel,errorMsgsec"/>
       -->
        <apex:actionFunction name="SelectedProduct"  status="ProductSelection" action="{!SelectedProduct}" reRender="prodsecid,locksection,modifId,deliveryDateId,RefreshButton,SaveId,suggestedPriceId,branchGid,customerTotalid,sellpId,marketId,totalTid,lockTid,tcPanel,errorMsgsec,propanelid"/>
     
     <apex:actionFunction name="makeAddAvailable"  action="{!makeAddAvailable}" rerender="addressValidateError,validatebutton,RefreshButton,proSelect,SaveId,prodsecid"/>
     <apex:actionFunction name="ontypeChangevalue"  action="{!TransactionWebservice}" rerender="typeselectid,ttyepe,trasSecId,validatebutton,RefreshButton,proSelect,SaveId,prodsecid"/>

   <!--  <apex:actionFunction name="getSpecificProductDetail"  status="ProductSelection" action="{!getSpecificProductDetail}" reRender="propanelid,locksection,prodsecid,modifId,deliveryDateId,RefreshButton,SaveId,suggestedPriceId,branchGid,customerTotalid,sellpId,marketId,totalTid,lockTid,errorMsgsec" />
     -->
      <apex:actionFunction name="getSpecificProductDetail"  status="ProductSelection" action="{!getSpecificProductDetail}" reRender="propanelid,RefreshButton,SaveId,errorMsgsec" />
    
     <apex:actionFunction name="getSpecificBranchIDMethod" status="LoadBranch"  action="{!getSpecificBranchIDMethod}" reRender="fid, dfbId,deliveryZone,fulfillingBranchId,fulfillingError,addressValidateError,validatebutton, crossfId,mv1,mv2,mv3,mv4,viewBranchIdShanshort,prodsecid,modifId,deliveryDateId,RefreshButton,SaveId,suggestedPriceId,branchGid,customerTotalid,sellpId,marketId,totalTid,lockTid,shippingadd" />
        <apex:actionFunction name="okCapacityPopUp" action="{!CapacityIdSelected}" reRender="CapacityLookupPanel,deliveryDatePanelId,deliveryDateInputId,wwynyuId"/>    
   
        
     <input type="hidden" id="selectedAddr" name="selectedAddr" />
     <input type="hidden" id="selectedTex" name="selectedTex" />
     <input type="hidden" id="selectedBranch" name="selectedBranch" />
     <input type="hidden" id="selectedProd" name="selectedProd" />
     <input type="hidden" id="prodCode" name="prodCode" />
     <input type="hidden" id="fBranchCode" name="fBranchCode" />
     <input type="hidden" id="capacitySelactedValue" name="capacitySelactedValue" />
          <!--  <div >
           
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
           &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  
 
          
                    <apex:outputLabel value="Type" /> &nbsp; &nbsp;                 
                    <apex:selectList value="{!qqType}" multiselect="false" size="1">  
                     <apex:selectOption itemValue="Rental" itemLabel="Rental"/>  
                     <apex:selectOption itemValue="Sales" itemLabel="Sales"/>       
                         <apex:actionsupport event="onchange"  status="sts1" action="{!TransactionWebservice}" rerender="trasSecId" />
                    </apex:selectList>
                    
                    <br/>
                    <br/>
                    <br/>
                     <br/>
           
           </div>
                     -->                         
            
    
         <apex:actionStatus id="onloadStatus" > 
                            <apex:facet name="start">
                            <apex:outputPanel styleClass="popupBackground1" layout="block" />
                
                <apex:outputPanel style="-moz-border-radius: 15px;-webkit-border-radius: 15px;border-radius: 10px;" styleClass="custPopup12" layout="block">                       
                 <br/>
                                <div align="center">
                                    <img src="{!$Resource.Loading}" />
                                    <br/><br/>
                                    <font color="Red"><b>Loading....</b></font>
                                </div>     
                                </apex:outputPanel>                          
                            </apex:facet>
                            <apex:facet name="stop"></apex:facet>                     
     </apex:actionStatus>   
                        

            <apex:outputPanel id="DeferredLoad">                
                 <apex:outputPanel >
            
        <apex:pageBlock id="lockblock"  mode="maindetail">
        
        <apex:pageBlockSection title="Contact Information" collapsible="true" id="ConInfoId">
            <apex:pageBlockSectionItem >    
                    <apex:outputLabel value="Contact First Name" />
                     <apex:outputPanel styleClass="requiredInput" layout="block">
                     <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                        <apex:inputText value="{!qqWrapper.oppContactName}" />
                     </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >    
                    <apex:outputLabel value="Contact Last Name" />
                     <apex:outputPanel styleClass="requiredInput" layout="block">
                     <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                        <apex:inputText value="{!qqWrapper.oppContactLastName}" />
                     </apex:outputPanel>
                </apex:pageBlockSectionItem>  
                
                 <apex:pageBlockSectionItem id="ttypesec">
                    <apex:outputLabel value="Phone No." />
                    <apex:outputPanel styleClass="requiredInput" layout="block">
                     <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                        <apex:inputText value="{!qqWrapper.oppContactPhone}"  maxlength="20" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem id="conMob">
                    <apex:outputLabel value="Mobile No." />
                    <apex:outputPanel >
                        <apex:inputText value="{!qqWrapper.oppContactMob}"  maxlength="20" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem id="conEmail">
                    <apex:outputLabel value="Email" />
                    <apex:outputPanel >
                        <apex:inputText value="{!qqWrapper.oppContactEmail}" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                                              
        </apex:pageBlockSection>
        
        <apex:pageBlockSection title="" collapsible="false" id="typeselectid">
                <apex:pageBlockSectionItem >    
                    <apex:outputLabel value="Type" />                   
                    <apex:selectList value="{!qqType}" size="1" id="ttyepe" title="Rental or Sales">
                       <apex:selectOption itemValue="Sales" itemLabel="Sales"/> 
                        <apex:selectOption itemValue="Rental" itemLabel="Rental"/>  
                           
                         <apex:actionsupport event="onchange"  status="sts1"  action="{!onTypeChangePageRedi}" />
                        </apex:selectList> 
                </apex:pageBlockSectionItem>  
                
                <apex:pageBlockSectionItem id="ttypesec">
                    <apex:outputLabel value="Transaction Type"/>
                    <apex:outputPanel styleClass="requiredInput" layout="block"> 
                    <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                    <apex:selectList value="{!qqWrapper.TransactionType}" size="1" id="trasSecId" onchange="onTransactionChange();" title="Sales Order Fleet Sales= Selling assets from the lease fleet Sales order MFG/Accessories= Selling assets from finished goods (Unit item codes that begin with �SL�) or sales of accessories only Sales Order Wholesale Direct= Selling wholesale direct assets � typically the item code will have �AS IS� in it">
                        <apex:selectOptions value="{!transactionOptions}"/>
                         <apex:actionsupport event="onchange"  status="sts1" rerender="validatebutton,RefreshButton,proSelect,SaveId,prodsecid,includeLLWid" />
                    
                    </apex:selectList> 
                    </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                                                  
            </apex:pageBlockSection>
             
            
        
            <apex:pageBlockSection title="Lead Information" rendered="{!if(LeadRef.Name = null,false,true)}" collapsible="false">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Lead Name" />                  
                    <!-- <apex:outputLink value="/{!LeadRef.id}" target="_blank">{!LeadRef.Name}</apex:outputLink> -->
                    <apex:outputLabel value="{!LeadRef.Name}" style="text-decoration: underline;cursor:pointer;" onclick="openRecord('{!LeadRef.id}');" />
                </apex:pageBlockSectionItem> 
         
            </apex:pageBlockSection>
            <apex:pageBlockSection title="Opp Name" collapsible="false" rendered="{!if(OppRef.Name != null,true,false)}">
                <apex:pageBlockSectionItem >    
                    <apex:outputLabel value="Opp Name" />                   
                    <!-- <apex:outputLink value="/{!OppRef.id}" target="_blank">{!OppRef.Name}</apex:outputLink>  -->
                    <apex:outputLabel value="{!OppRef.Name}" style="text-decoration: underline;cursor:pointer;" onclick="openRecord('{!OppRef.id}');" />
                </apex:pageBlockSectionItem>   
                                     
            </apex:pageBlockSection>
            
              <apex:pageBlockSection title="Account Information" collapsible="true" rendered="{!!if((OppRef.Name = null) && (LeadRef.Name = null),false,true)}">
                <apex:pageBlockSectionItem >    
                    <apex:outputLabel value="Account Name" />                   
                        <!-- <apex:outputLink value="/{!AccRef.id}" target="_blank">{!AccRef.Name}</apex:outputLink> -->
                        <apex:outputLabel value="{!AccRef.Name}" style="text-decoration: underline;cursor:pointer;" onclick="openRecord('{!AccRef.id}');" />
                </apex:pageBlockSectionItem>                                
            </apex:pageBlockSection>
            
            <apex:pageBlockSection title="Discovery" collapsible="true" id="DiscoverySection">
                 <apex:pageBlockSectionItem >
                     <div id="CrossSError" style="display:none"><span style="float:right; "> <font color="red">Please Fill discovery section value</font></span></div>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                 <apex:pageBlockSectionItem id="WhydoyouneedstorageMain">
                    <apex:outputLabel value="Storage Use" />
                    <apex:outputPanel >
                        <apex:outputPanel styleClass="requiredInput" layout="block"> 
                        <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                        <apex:selectList value="{!qqWrapper.Whydoyouneedstorage}" size="1" >
                            <apex:selectOptions value="{!storageUseOptionsList}" id="Whydoyouneedstorage"/>
                        </apex:selectList>
                        </apex:outputPanel>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem id="WhenwillyouneedyourunitMain">
                    <apex:outputLabel value="When will you need your unit?" />
                        <apex:inputField value="{!mmiQuote.When_will_you_need_your_unit__c}" id="Whenwillyouneedyourunit"/>
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem id="WhatwillyoubestoringMain">
                    <apex:outputLabel value="What will you be storing?" />
                        <apex:inputTextArea value="{!qqwrapper.Whatwillyoubestoring}" id="Whatwillyoubestoring"/>
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem id="HowoftenwillyouneedtoaccessMain">
                    <apex:outputLabel value="How often will you need to access?" />
                        <apex:selectList value="{!qqwrapper.Howoftenwillyouneedtoaccess}" multiselect="false" size="1" id="Howoftenwillyouneedtoaccess">
                            <apex:selectOption itemValue="--None--" itemLabel="--None--"/>
                            <apex:selectOption itemValue="Daily" itemLabel="Daily"/>
                            <apex:selectOption itemValue="Weekly" itemLabel="Weekly"/>
                            <apex:selectOption itemValue="Monthly" itemLabel="Monthly"/>
                            <apex:selectOption itemValue="Rarely" itemLabel="Rarely"/>
                         </apex:selectList>
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem id="HowlongwillyouneedyourunitMain">
                    <apex:outputLabel value="How long will you need your unit?" />
                    <apex:outputPanel styleClass="requiredInput" layout="block"> 
                    <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                        <apex:selectList value="{!qqwrapper.Howlongwillyouneedyourunit}" multiselect="false" size="1" id="Howlongwillyouneedyourunit">
                            <!-- <apex:selectOption itemValue="--None--" itemLabel="--None--"/>
                            <apex:selectOption itemValue="1 Month" itemLabel="1 Month"/>
                            <apex:selectOption itemValue="2 -6 Months" itemLabel="2 -6 Months"/>
                            <apex:selectOption itemValue="6-12 months" itemLabel="6-12 months"/>
                            <apex:selectOption itemValue="13+ months" itemLabel="13+ months"/>
                            <apex:selectOption itemValue="Contractor" itemLabel="Contractor"/> -->
                            <apex:selectOptions value="{!HowLongWillYouNeedTheUnitOptionsList}" id="HowLongWillU"/>
                         </apex:selectList>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem id="WhoisgoingtobeaccessingyourunitMain">
                    <apex:outputLabel value="Who is going to be accessing your unit?" />
                        <apex:inputTextArea value="{!qqwrapper.Whoisgoingtobeaccessingyourunit}" id="Whoisgoingtobeaccessingyourunit"/>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
            
            <apex:pageBlockSection title="Shipping Address Details & Branch Information" collapsible="false" id="shippingadd">
            
            <apex:pageBlockSectionItem > <div id="ZipError" style="display:none"><span style="float:right; "> <font color="red">Missing or Invalid Zip Code</font></span></div>
                                    
                                    <div id="ttypeError" style="display:none"><span style="float:right; "> <font color="red">Please Select Transaction Type </font></span></div>
      </apex:pageBlockSectionItem>  
                      
                          <apex:pageBlockSectionItem > </apex:pageBlockSectionItem> 
                           
            
                <apex:pageBlockSectionItem id="addSec">
                    <apex:outputLabel value="Address" >
                   </apex:outputLabel>
                   <apex:outputPanel >  
                    <apex:inputTextArea value="{!qqWrapper.Address}" id="addId" title="Default= Delivery Address if Present, otherwise Billing Address Data from Address Information Section">
<!--                      <apex:actionsupport event="onchange"  status="sts1"  action="{!makeAddAvailable}" rerender="addressValidateError,validatebutton,RefreshButton,proSelect,SaveId,prodsecid" /> -->
                    </apex:inputTextArea>
                     </apex:outputpanel>  
                </apex:pageBlockSectionItem>  
                
                     <apex:pageBlockSectionItem id="fulfillingBranchId">
                    <apex:outputLabel value="Fulfilling Branch" />
                    <apex:outputPanel >  
                         <apex:inputText value="{!qqWrapper.FulfillingBranch}" id="fid" onchange="branchTabOff();" title="Servicing Branch">
                         </apex:inputText>&nbsp;&nbsp;
                        <apex:actionStatus id="LoadBranch">
                            <apex:facet name="stop">
                              <apex:commandLink onclick="branchShow();" reRender="testid" style="position:relative;top:5px;"> <apex:image url="https://c.cs3.content.force.com/servlet/servlet.ImageServer?id=015Q00000007toU&oid=00DQ000000B5dZh&lastMod=1364209869000"  height="18" width="18" /> </apex:commandLink>
                            </apex:facet>
                            <apex:facet name="start">
                                <apex:commandButton value="Loading..." styleclass="readmore" disabled="true" status="LoadBranch" />
                            </apex:facet>
                        </apex:actionStatus>
                        <apex:actionStatus id="sts" > 
                            <apex:facet name="start">
                                <apex:image value="{!$Resource.Loading}" width="25" height="25"/>                               
                            </apex:facet>
                            <apex:facet name="stop"></apex:facet>                     
                        </apex:actionStatus>
                            <apex:outputPanel id="addressValidateError">
                                <div ><apex:outputText value="{!addressErrorMessage}" /></div>
                            </apex:outputPanel>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                   
               <apex:pageBlockSectionItem >
                    <apex:outputLabel value="City" />
                     <apex:inputText value="{!qqWrapper.City}" id="cityid">
                    <apex:actionsupport event="onchange"    status="sts1"  action="{!makeAddAvailable}" rerender="addressValidateError,validatebutton,RefreshButton,proSelect,SaveId,prodsecid"/>
                    </apex:inputText>
                </apex:pageBlockSectionItem>
                
               
                  <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Distance from branch" />
                    <apex:inputText value="{!qqWrapper.distanceFromBranch}" id="dfbId" title="Distance in miles the Shipping Address is from the Fulfiling Branch"/>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem id="contsec">
                 <apex:outputpanel >
                    <apex:outputLabel value="Country" />   
                                 </apex:outputpanel>
                      <apex:outputPanel styleClass="requiredInput" layout="block">  
                    <apex:outputPanel styleClass="requiredBlock" layout="block"/>       
                     <apex:selectList value="{!qqWrapper.Country}"  multiselect="false" size="1"  id="countries">  
                     <apex:selectOption itemValue="" itemLabel="-None-"/>                 
                      <apex:selectOptions value="{!CountryOptions}"/>
                        <apex:actionsupport event="onchange"  action="{!StatesList}" rerender="validatebutton,stateId,RefreshButton,proSelect,SaveId,prodsecid" status="countryStatus"/>
                    </apex:selectList>
                     </apex:outputpanel>  
                                                               
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Delivery Zone" /> 
                    <apex:inputText value="{!qqWrapper.DeveloperZone}" id="deliveryZone"/ >
                </apex:pageBlockSectionItem>
                 <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputPanel ></apex:outputPanel>
                    <apex:outputPanel >
                        <apex:actionStatus id="capLookup">
                            <apex:facet name="stop">
                                <apex:commandbutton value="Capacity Lookup" action="{!callCapacityLookupWebservice}" status="capLookup" onclick="showCapacityPopUp();" rerender="CapacityLookupPanel,errorMessageTop" tabindex="26"/>
                            </apex:facet>
                            <apex:facet name="start">
                                <apex:commandButton value="Loading..." styleclass="readmore" disabled="true" status="capLookup" />
                            </apex:facet>
                        </apex:actionStatus>
                        <apex:outputPanel id="noZoneBtnOP">
                            <apex:actionStatus id="noZoneEmail">
                                <apex:facet name="stop">
                                    <apex:commandbutton id="noZoneBtn" value="No Zone - Get Delivery Rates" disabled="{!isknowZoneRatesBtnDisabled}" action="{!NoDelZoneRates}" status="noZoneEmail" rerender="noZoneBtnOP,emailErrorMessage" />
                                </apex:facet>
                                <apex:facet name="start">
                                    <apex:commandButton value="Loading..." styleclass="readmore" disabled="true" status="noZoneEmail" />
                                </apex:facet>
                            </apex:actionStatus>
                        </apex:outputPanel>
                        <br/><apex:pageMessages id="emailErrorMessage" />
                        <br/>
                        <apex:outputLabel value="Delivery Slot" />
                        <apex:selectList value="{!qqWrapper.deliverySlot}"  multiselect="false" size="1">
                              <apex:selectOption itemValue="AM" itemLabel="AM"/>
                              <apex:selectOption itemValue="PM" itemLabel="PM"/>
                         </apex:selectList>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputpanel >
                    <apex:outputLabel value="State" />
                    </apex:outputpanel>
                    <apex:outputPanel id="stateId">  
                    <apex:selectList value="{!qqWrapper.State}" multiselect="false" size="1" id="States">               
                      <apex:selectOptions value="{!StateOptions}"/>
                        <apex:actionsupport event="onchange"  status="sts1"  action="{!makeAddAvailable}" rerender="addressValidateError,validatebutton,RefreshButton,proSelect,SaveId,prodsecid" />
                    </apex:selectList>   
                     
                    <apex:actionStatus id="countryStatus" > 
                            <apex:facet name="start">
                                <apex:image value="{!$Resource.Loading}" width="25" height="25"/>                               
                            </apex:facet>
                            <apex:facet name="stop"></apex:facet>                     
                        </apex:actionStatus>   
                         </apex:outputPanel>                                    
                </apex:pageBlockSectionItem>
                  
                 <apex:pageBlockSectionItem id="MarketValueRange20S">
                    <apex:outputLabel value="Market Value Range 20S" />
                     <apex:inputText value="{!qqWrapper.MarketValueRange20S}" disabled="true" id="mv1" title="Ranges pulled from the Fulfilling Branch's Snapshot">
                    <apex:actionsupport event="onchange"    status="sts1"  rerender=""/>
                    </apex:inputText>
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem id="zipsec">
                <apex:outputpanel >
                    <apex:outputLabel value="Zip Code" />
                    </apex:outputpanel>
                    <apex:outputPanel > 
                         <apex:inputText id="zipCode" value="{!qqWrapper.ZipCode}" maxlength="10">
                        <apex:actionsupport event="onchange"  status="sts1"  action="{!ClearFullFillBrnch}" rerender="fid,dfbId,deliveryZone,addressValidateError,validatebutton,RefreshButton,proSelect,SaveId,prodsecid" />
                    </apex:inputText>
                    
                    <apex:actionStatus id="zipCodeFinderMain" > 
                         <apex:facet name="stop">
                               <apex:commandButton value="Address Fill" id="ZipCodeFinder" action="{!ZipCodeFinder}" reRender="stateId,countries,cityid" status="zipCodeFinderMain"/>
                          </apex:facet>
                          <apex:facet name="start">
                              <apex:commandButton value="Loading..." styleclass="readmore" disabled="true" status="zipCodeFinderMain" />
                          </apex:facet>                      
                      </apex:actionStatus>
                      
                 </apex:outputPanel>
                                                        
                </apex:pageBlockSectionItem> 
                   
                   <apex:pageBlockSectionItem id="MarketValueRange20ZS">
                    <apex:outputLabel value="Market Value Range 20ZS" />
                     <apex:inputText value="{!qqWrapper.MarketValueRange20ZS}" disabled="true" id="mv2" title="Ranges pulled from the Fulfilling Branch's Snapshot">
                    <apex:actionsupport event="onchange"    status="sts1"  rerender=""/>
                    </apex:inputText>
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem id="crossPBId">
                    <apex:outputLabel value="Cross Streets" />
                    
                     <apex:outputPanel >
                     
                        <apex:inputText value="{!qqWrapper.CrossStreets}" id="crossfId" >
                         <apex:actionsupport event="onchange"   status="sts1"  action="{!makeAddAvailable}" rerender="addressValidateError,validatebutton,RefreshButton,proSelect,SaveId,prodsecid"/>
                        </apex:inputText>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem id="MarketValueRange40S">
                    <apex:outputLabel value="Market Value Range 40S" />
                     <apex:inputText value="{!qqWrapper.MarketValueRange40S}" disabled="true" id="mv3" title="Ranges pulled from the Fulfilling Branch's Snapshot">
                    <apex:actionsupport event="onchange"    status="sts1"  rerender=""/>
                    </apex:inputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel ></apex:outputLabel>
                    <apex:outputPanel >
                  <!--   <apex:outputtext value="{!!showValidateAddress}"/> --> 
                  <apex:actionStatus id="loginStatus">
                            <apex:facet name="stop">
                            
                                  <apex:commandButton id="validatebutton" value="Validate Address"  onclick=" PostalCodevalidate();" disabled="{!!qqwrapper.showValidateAddress}" status="loginStatus"  reRender="selecAdd,addressImage"/>
                             </apex:facet>
                            <apex:facet name="start">
                                <apex:commandButton value="Validating..." styleclass="readmore" disabled="true" status="loginStatus" />
                                
                            </apex:facet>
                        </apex:actionStatus>
                         
                        <apex:actionStatus id="sts1" > 
                            <apex:facet name="start">
                                <apex:image value="{!$Resource.Loading}" width="25" height="25"/>                               
                            </apex:facet>
                            <apex:facet name="stop"></apex:facet>                     
                        </apex:actionStatus>
                       
                     
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                  
                  <apex:pageBlockSectionItem id="MarketValueRange40ZS" >
                    <apex:outputLabel value="Market Value Range 40ZS" />
                     <apex:inputText value="{!qqWrapper.MarketValueRange40ZS}" disabled="true" id="mv4" title="Ranges pulled from the Fulfilling Branch's Snapshot">
                    </apex:inputText>
                    
                </apex:pageBlockSectionItem>
                 <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                   <apex:outputLabel ></apex:outputLabel>
<!--                 <apex:commandButton value=" View Branch SnapShot" onclick="window.open('/apex/ViewWeeklyBranchSnapshot?servicingBranch='+qqWrapper.UserBranchId+'&retURL='+leadRecId','_blank')" />-->
                    <apex:outputLabel id="viewBranchIdShanshort"><apex:commandButton action="{!test}" value=" View Branch SnapShot" onclick="window.open('/apex/ViewWeeklyBranchSnapshot?servicingBranch={!fullfillingBranch}&retURL={!leadRecId}','_blank'); " rerender="viewBranchIdShanshort" title="Branch Specific Information" /></apex:outputLabel>
                        
                 </apex:pageBlockSectionItem>
                 
                             
            </apex:pageBlockSection> 
               
              
<!--           <center>  <apex:messages id="errorMsgsec" styleClass="errorMsg" style="font-family:georgia,garamond,serif;"  /></center> -->
            <apex:pageBlockSection title="Product and Pricing Information" collapsible="true" id="locksection">
               
                <apex:outputPanel id="ClosePopPanel" styleClass="popupBackground1" layout="block" rendered="{!qqWrapper.DisplayErrorPopUp}" />
                      <apex:outputPanel id="errorPanel1" style="-moz-border-radius: 15px;-webkit-border-radius: 15px;border-radius: 10px;" styleClass="custPopup1" layout="block" rendered="{!qqWrapper.DisplayErrorPopUp}">
                      <apex:pageblock title="Error Occured">
                        <apex:messages styleClass="errorMsg" style="font-family:georgia,garamond,serif;" /> <br/>
                        <apex:commandbutton value="Close" rerender="out3,errorMsgsec" action="{!hideError}" onclick="hideErrorMsg();"></apex:commandbutton>
                        </apex:pageblock>
                      </apex:outputPanel>
                  <apex:messages id="errorMsgsec" styleClass="errorMsg" style="font-family:georgia,garamond,serif;"  rendered="{!!salesRepErr}"/>
                  <apex:outputPanel />
                  <apex:pageBlockSectionItem id="prodSec">
                <apex:outputPanel > 
                    <apex:outputLabel value="Product" />
                    </apex:outputPanel>
                   
                    <apex:outputPanel id="prodsecid" styleClass="requiredInput" layout="block"> 
                    <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                        <apex:inputText value="{!qqWrapper.Product}" disabled="{!!qqwrapper.showProdSelect}" onchange="productTabOff();" id="prodinId" title="Item Code Being Quoted">
                    <!--    <apex:actionsupport event="onkeyup" action="{!disableSaveButton}" rerender="SaveId,RefreshButton"/>
                        <apex:actionsupport event="onchange" action="{!getSpecificProductDetail}" reRender="formId,rateId,SaveId,RefreshButton"/>  -->
                        </apex:inputText>&nbsp;&nbsp; <apex:image value="{!$Resource.SearchImage}"  height="18" width="18" rendered="{!!qqwrapper.showProdSelect}" style="position:relative;top:5px;" id="proSelectDIS"/>
                        
                        <apex:actionStatus id="ProductSelection">
                            <apex:facet name="stop">
                                 <!--  <a href="javascript:" onclick="showProductSearch();"> <apex:image value="{!$Resource.SearchImage}"  height="18" width="18" /> </a>
                            -->
                                 <apex:commandLink id="proSelect"  onclick="showProductSearch();" status="ProductSelection" reRender="propanelid"  rendered="{!qqwrapper.showProdSelect}" style="position:relative;top:5px;"> <apex:image value="{!$Resource.SearchImage}"  height="18" width="18" />  </apex:commandLink>
                            <!--   <apex:commandLink value="Select" id="proSelect" action="{!ProductsSelection}"  onclick="showProductSearch();" status="ProductSelection" reRender="propanelid" disabled="{!!qqwrapper.showProdSelect}"/>-->
                            </apex:facet>
                            <apex:facet name="start">
                                <apex:commandButton value="Loading..." styleclass="readmore" disabled="true" status="ProductSelection" />
                            </apex:facet>
                        </apex:actionStatus>
                          
                        
                        <apex:actionStatus id="sts2" > 
                            <apex:facet name="start">
                                <apex:image value="{!$Resource.Loading}" width="25" height="25"/>                               
                            </apex:facet>
                            <apex:facet name="stop"></apex:facet>                     
                        </apex:actionStatus>                      
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Suggested Price" />
                    <apex:outputPanel id="suggestedPriceId" >
                    <apex:inputText style="width:80px;" value="{!qqWrapper.suggestedPrice}" disabled="true" title="Price suggested from Sellable List" /> 
                     </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem id="qtysec">
                    <apex:outputLabel value="# of Units on Opp" style="position:relative;font-weight:bold;" ></apex:outputLabel>
                    <apex:outputPanel styleClass="requiredInput" layout="block"> 
                    <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                        <apex:outputpanel >
                        <apex:inputText value="{!qqWrapper.Quantity}" onkeypress="return onlyNumbers(event)" Style="width:20px;position:relative;top:0px;" id="qty" maxlength="2">
                         </apex:inputText>
                        <apex:image url="{!$Resource.SortArrowDown}" onclick="increse('1');" width="10" height="10" style=" text-decoration: none; position:relative;left:7px;top:-5px; transform:rotate(180deg); -moz-transform:rotate(180deg); -webkit-transform:rotate(180deg); -o-transform:rotate(180deg); -ms-transform:rotate(180deg);" /> 
                        <apex:image url="{!$Resource.SortArrowDown}" onclick="decrese('1');" width="10" height="10" style=" text-decoration: none; position:relative;top:5px;left:-3px;" />
                        <!-- <apex:outputlabel value="?" onclick="increse('1');" style=" text-decoration: none; position:relative;top:-7px;" > </apex:outputlabel>
                       <apex:outputlabel value="?" onclick="decrese('1'); "  style=" text-decoration: none; position:relative;top:3px;right:12px;" ></apex:outputlabel> -->
                       </apex:outputpanel>
                   </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem id="unitType">
                    <apex:outputLabel value="Unit Type" />
                    <apex:outputPanel >
                        <apex:selectList value="{!qqWrapper.unitType}" size="1" disabled="true">
                            <apex:selectOptions value="{!unitTypeOptionsList}" id="unitTypeListId"/>
                        </apex:selectList>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Minimum Price" />
                    <apex:outputPanel id="marketId"> 
                        <apex:inputText style="width:80px;" value="{!qqwrapper.minimumPrice}" disabled="true" title="Lowest Price to be quoted"/>

                     <!--    &nbsp;&nbsp;<apex:inputText style="width:50px;" value="{!Rental_PP_E_Total}" disabled="true" /> -->
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem id="locksec">                    
                     <apex:outputLabel value="Locks" ></apex:outputLabel>  
                     <apex:outputPanel id="lockPanel">
                         <!--<apex:panelGrid columns="2">-->
                          
                             <apex:inputText value="{!qqWrapper.Locks}" onkeypress="return onlyNumbers(event)" Style="width:20px;position:relative;"  id="lock" maxlength="2" title="Number of Locks to be Sold"> 
                          <apex:actionsupport event="onchange" action="{!disableSaveButton}" rerender="SaveId"/>
                          </apex:inputText>      
                             <!--<apex:panelGrid columns="1"> -->                           
                                  
                                  <!--  <a href="" value="?" onclick="increse()" style=" text-decoration: none; position:relative;top:-7px;" >?</a>
                                   <a href="" value="?" onclick="decrese()"  style=" text-decoration: none; position:relative;top:3px;right:15px;">?</a> -->
                                    <apex:image url="{!$Resource.SortArrowDown}" onclick="increse('2');" width="10" height="10" style=" text-decoration: none; position:relative;left:7px;top:-5px; transform:rotate(180deg); -moz-transform:rotate(180deg); -webkit-transform:rotate(180deg); -o-transform:rotate(180deg); -ms-transform:rotate(180deg);" /> 
                                    <apex:image url="{!$Resource.SortArrowDown}" onclick="decrese('2');" width="10" height="10" style=" text-decoration: none; position:relative;top:5px;left:-3px;" />
                                    <!-- <apex:outputlabel value="?" onclick="increse('2')" style=" text-decoration: none; position:relative;top:-7px;" ></apex:outputlabel>
                                   <apex:outputlabel value="?" onclick="decrese('2')"  style=" text-decoration: none; position:relative;top:3px;right:12px;" ></apex:outputlabel> -->
                            <!--</apex:panelGrid>-->
                         <!--</apex:panelGrid>-->
                     </apex:outputPanel>                                        
                </apex:pageBlockSectionItem>
                
             
                <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                
                 
                 <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Delivery Date" ></apex:outputLabel>
                <apex:outputPanel styleClass="requiredInput" layout="block" id="deliveryDateId" title="Date of Requested Delivery" > 
                    <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                    
                       <apex:inputField id="deliveryDateInputId" value="{!mmiQuote.Date_From__c}" onchange="datechange();" />
                     </apex:outputpanel>
                </apex:pageBlockSectionItem>
                
<!--                 <apex:pageBlockSectionItem > -->
                        
<!--                 </apex:pageBlockSectionItem> -->
                
<!--                 <apex:pageBlockSectionItem > -->
<!--                     <apex:outputLabel value="Unit Gross Profit" /> -->
<!--                      <apex:outputPanel id="branchGid">    -->
<!--                         <apex:inputText style="width:80px;" value="{!qqwrapper.branchGross}" /> -->
<!--                         &nbsp;&nbsp;<apex:inputText style="width:50px;" value="{!LLWTotal}" disabled="true" /> -->
<!--                      </apex:outputPanel> -->
<!--                 </apex:pageBlockSectionItem> -->
                
                 <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Selling Price" />
                     <apex:outputPanel id="sellpId">                        
                        <apex:inputText style="width:80px;background-color:#2EFEC8;" value="{!qqwrapper.sellingPrice}"  title="Price Quoted to Customer,  entered by Sales Rep">
                         <apex:actionsupport event="onchange" action="{!disableSaveButton}" rerender="SaveId"/>
                          </apex:inputText> 
                     </apex:outputPanel>
                </apex:pageBlockSectionItem>
               
                
                
                <apex:pageBlockSectionItem >
                   <apex:outputLabel ></apex:outputLabel>
                    <apex:outputPanel >
                    
                     
                    <apex:actionStatus id="RefreshStatus">
                            <apex:facet name="stop">
                                <apex:commandButton value="Refresh Rates" id="RefreshButton" action="{!Refresh}" disabled="{!!qqWrapper.showRefreshQUote}" rerender="unitTypeListId,formid,saveButtonPanelId,errorPanel1,lockblock,validatebutton,RefreshButton,proSelect,SaveId" status="RefreshStatus"/>
                            </apex:facet>
                            <apex:facet name="start">
                                <apex:commandButton value="Loading..." styleclass="readmore" disabled="true" status="RefreshStatus" />
                            </apex:facet>
                        </apex:actionStatus>
                        
                    <apex:actionStatus id="QuoteRefreshStatus" > 
                            <apex:facet name="start">
                                <apex:image value="{!$Resource.Loading}" width="25" height="25"/>                               
                            </apex:facet>
                            <apex:facet name="stop"></apex:facet>                     
                        </apex:actionStatus>
                   </apex:outputPanel> 
                </apex:pageBlockSectionItem>     
                
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Modification Total" />
                    <apex:outputPanel id="modifId"> 
                        <apex:inputText style="width:80px;" value="{!qqwrapper.modificationTotal}" title="General Price for standard modifications">
                            <apex:actionsupport event="onchange" action="{!disableSaveButton}" rerender="SaveId"/>
                        </apex:inputText>                   
                       <!--  &nbsp;&nbsp;<apex:inputText style="width:50px;" value="{!PickUpTotal}" disabled="true" /> --> 
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem >                    
                                           
                </apex:pageBlockSectionItem>
                  <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Delivery Rate" />
                    <apex:outputPanel id="DeliveryPanel"> 
                        <apex:inputText style="width:80px;" value="{!qqWrapper.DeliveryTotal}" disabled="true" title="Amount for Delivery + Fuel">
                            <apex:actionsupport event="onchange" action="{!disableSaveButton}" rerender="SaveId"/>
                        </apex:inputText>
                       <!--  &nbsp;&nbsp;<apex:inputText style="width:50px;" value="{!DeliveryTotal}" disabled="true" /> -->
                    </apex:outputPanel>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >                    
                                           
                </apex:pageBlockSectionItem>
                
         
                  <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Transport Charge" />
                    <apex:outputPanel id="tcPanel"> 
                        <apex:inputText style="width:80px;" value="{!qqWrapper.Transport}" title="Delivery Amount Only">
                            <apex:actionsupport event="onchange" action="{!disableSaveButton}" rerender="SaveId"/>
                        </apex:inputText>
                       <!--  &nbsp;&nbsp;<apex:inputText style="width:50px;" value="{!DeliveryTotal}" disabled="true" /> -->
                    </apex:outputPanel>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >                    
                                           
                </apex:pageBlockSectionItem>
                
                 <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Lock Total" />
                    <apex:outputPanel id="lockTid">
                        <apex:inputText style="width:80px;" value="{!qqWrapper.LocksAmount}" title="Amount for Lock/s">
                            <apex:actionsupport event="onchange" action="{!disableSaveButton}" rerender="SaveId"/>
                        </apex:inputText>                    
                        <!-- &nbsp;&nbsp;<apex:inputText style="width:50px;" value="{!FuelSurchargeTotal}" disabled="true" /> -->  
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                 <apex:pageBlockSectionItem >                    
                                           
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Total Tax" />
                    <apex:outputPanel id="totalTid" >
                        <apex:inputText style="width:80px;" value="{!qqwrapper.Tax}" disabled="true" title="Tax Amount">
                            <apex:actionsupport event="onchange" action="{!disableSaveButton}" rerender="SaveId" />
                        </apex:inputText>                    
                        <!-- &nbsp;&nbsp;<apex:inputText style="width:50px;" value="{!FuelSurchargeTotal}" disabled="true" /> -->  
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem ></apex:pageBlockSectionItem> 
               
                
                 <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Customer Total" />
                     <apex:outputPanel id="customerTotalid">
                        <apex:inputText style="width:80px;" value="{!qqwrapper.totalCost}" disabled="true" title="Selling Price+Modification Total+Delivery Rate+Lock Total+Tax Total"/>
                      <!--   &nbsp;&nbsp;<apex:inputText style="width:50px;" value="{!LocksAmountTotal}" disabled="true" /> -->
                     </apex:outputPanel>
                </apex:pageBlockSectionItem>  
                               
                
            </apex:pageBlockSection>
            
            

           <apex:pageBlockSection title="Additional Information" collapsible="true" id="AdditionalInformation">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Quote Comments" />
                     <!-- <apex:inputText value="{!qqwrapper.QuoteComments}" /> -->
                     <apex:inputTextArea rows="8" cols="50" value="{!qqwrapper.QuoteComments}" />
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem > 
                <apex:outputLabel value="Opp Close Date" />
                 <apex:outputPanel styleClass="requiredInput" layout="block"> 
                    <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                    
                     <apex:inputField value="{!mmiQuote.Close_Date__c}" />
                      </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Residential/On Site?" />
                    <apex:inputCheckBox value="{!qqwrapper.ResidentialOnSite}" />
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Follow Up Task Date" />
                    <apex:outputPanel styleClass="requiredInput" layout="block"> 
                        <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                        <apex:inputField value="{!OppRef.Next_Activity_Date__c}" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem> 
                
                <apex:pageBlockSectionItem > 
                
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Follow Up Task Comments" />
                     <apex:inputTextArea rows="8" cols="50" value="{!qqwrapper.followUpTaskComments}" />
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                           
           </apex:pageBlockSection>
           
           
                  <apex:outputPanel style="position:relative;left:150px;" id="saveButtonPanelId">
                &nbsp;&nbsp; 
                <apex:actionStatus id="SaveStatus">
                            <apex:facet name="stop">
                            <!--action="{!saveQuickQuote}"-->
                            <apex:commandButton value="Save" id="SaveId"  disabled="{!!qqWrapper.showSaveButton}" action="{!saveQuickQuoteSales}" status="SaveStatus"  reRender="formId"/>
                            </apex:facet>
                            <apex:facet name="start">
                                <apex:commandButton value="Saving..." styleclass="readmore" disabled="true" status="SaveStatus" />
                            </apex:facet>
                        </apex:actionStatus>
                
                &nbsp;
              <!--   &nbsp;&nbsp; <apex:commandButton value="No-Sale" action="{!NoSale}" reRender="formId" /> &nbsp; -->
<!--                 &nbsp;&nbsp; <apex:commandButton value="Convert Full Sales Quote"  reRender="formId"  /> &nbsp; -->
                    &nbsp;&nbsp; <apex:commandButton value="Cancel" action="{!cancelFullQuote}" /> 
                         
            </apex:outputPanel>
                
                         
            
                   <div id="TaxDiv" style="display:none;"> 
                   <apex:outputPanel id="TaxDivpanelid">
                           
                <apex:outputPanel styleClass="popupBackground" layout="block" />
                
                <apex:outputPanel style="-moz-border-radius: 15px;-webkit-border-radius: 15px;border-radius: 10px;" styleClass="custPopup" layout="block">                       
                 <br/>
                <!--  <apex:outputtext value="{!DispAddressPopUp}"/> -->
                 <apex:commandLink onclick="hideTaxPopUp();" reRender="formId" >
                      <apex:image style="position:relative;left:700px;" value="{!$Resource.WindowCloseLogo}" width="30" height="30"/>
                   </apex:commandLink>
                 <br/>
                 <center>
                 <apex:outputPanel rendered="{!!qqWrapper.showAddressPopup}">
                  <div align="center">
                        <img src="{!$Resource.Loading}" /> 
                        <br/><br/>
                        <font color="Red"><b>Loading....</b></font>
                    </div>                  
                </apex:outputPanel> 
                  <apex:pageblock rendered="{!qqWrapper.showAddressPopup}" title="Select Tax Id"> 
                  <apex:messages styleClass="errorMsg" style="font-family:georgia,garamond,serif;" /> <br/> 
                         
                          <div style="overflow:scroll; width:100%; height:200px;">
                                             
                             <table id="selectTax_grid" width="100%"> 
                            
                                <tr bgcolor="#F8F8F8">
                                        
                                        
                                        <td><b>Tax Id </b></td>
                                        <td><b>TaxAreaStatus</b></td>
                                        <td><b>Country</b></td>
                                        <td><b>CountryDescription Id</b></td>
                                        <td><b>State</b></td>
                                        <td><b>StateDescription</b></td>
                                        <td><b>City</b></td>
                                        
                                </tr>
                                
                                <apex:repeat value="{!AddressInnerClassList}" var="l">                                                  
                                                                                        
                                    <tr id="{!l.RecUniqId}" bgcolor="#F2F2F2">
                                        
                                        <td ondblclick="getSelectedRowValueTaxondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')"  onclick="getSelectedRowValueTax(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')" >
                                            <apex:outputText value="{!l.Id}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueTaxondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')"  onclick="getSelectedRowValueTax(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')" >
                                            <apex:outputText value="{!l.taxAreaStatus}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueTaxondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')"  onclick="getSelectedRowValueTax(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')" >
                                            <apex:outputText value="{!l.country}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueTaxondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')"  onclick="getSelectedRowValueTax(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')" >
                                            <apex:outputText value="{!l.countryDescription}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueTaxondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')"   onclick="getSelectedRowValueTax(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')" >
                                            <apex:outputText value="{!l.state}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueTaxondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')"  onclick="getSelectedRowValueTax(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')" >
                                            <apex:outputText value="{!l.stateDescription}" /> 
                                        </td>
                                        <td ondblclick="getSelectedRowValueTaxondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')"  onclick="getSelectedRowValueTax(this.parentNode.id,'{!l.RecUniqId}','selectedTex','selectTax_grid')" >
                                            <apex:outputText value="{!l.city}" /> 
                                        </td>
                                        
                                    </tr>
                                
                                </apex:repeat>
                                
                            </table>
                      
                        </div> 
                          
                          <br/>
                    
                      <center>
                          <apex:commandButton value="Ok"  status="loginStatus"  action="{!SelectedAddressId}"  onclick="hideTaxPopUpSave();" reRender="TaxDivpanelid,validatebutton,prodsecid,RefreshButton,SaveId,fulfillingBranchPanel,viewBranchIdShanshort,States,cityid,noZoneBtn,noZoneBtnOP" disabled="{!qqWrapper.disableTaxOkButton}"/>&nbsp;
                          <apex:commandButton value="Cancel" onclick="hideTaxPopUp();" reRender="TaxDivpanelid,viewBranchIdShanshort,noZoneBtn,noZoneBtnOP"/>      
                      </center>  
                          </apex:pageblock>
                           </center> 
                      <br/>
                </apex:outputPanel>  
            </apex:outputPanel>
        </div>
 
            
              
              <div id="descreteAddDiv" style="display:none;">
              <apex:outputPanel styleClass="DescAddresspopupBackground" layout="block" />
                  <apex:outputPanel id="fulfillingBranchPanel" style="-moz-border-radius: 15px;-webkit-border-radius: 15px;border-radius: 10px;" styleClass="custDescAddressPopup" layout="block" >
                  <br/> 
               <apex:commandLink status="loginStatus" onclick="hideshowDescretePopUpHide('descreteAddDiv');" rerender="fulfillingBranchPanel,TaxDiv">
             
                 <apex:image style="position:relative;left:700px;" value="{!$Resource.WindowCloseLogo}" width="30" height="30"/>
                  </apex:commandLink>
                  <br/>
                  
                  <apex:outputPanel rendered="{!!qqWrapper.dispDescAddrPopUp}" id="addressImage"> 
                  <div align="center">
                  
                        <img src="{!$Resource.Loading}" />
                        <br/><br/>
                        <font color="Red"><b>Loading....</b></font>
                    </div>                  
                </apex:outputPanel> 
                 
                  <apex:pageblock title="Select an Address" rendered="{!qqWrapper.dispDescAddrPopUp}" id="selecAdd">           
                       <br/>  
                          <apex:messages styleClass="errorMsg" style="font-family:georgia,garamond,serif;" /> <br/>           
                     <div style="overflow:scroll; width:100%; height:200px;">
                                             
                             <table id="selectAddr_grid" width="100%"> 
                            
                                <tr bgcolor="#F8F8F8">
                                        
                                        
                                        <td><b>Address </b></td>
                                        <td><b>State</b></td>
                                        <td><b>Zip Code</b></td>
                                        <td><b>Country Id</b></td>
                                        <td><b>Fulfilling Branch</b></td>
                                        <td><b>Fulfilling Branch Name</b></td>
                                        
                                </tr>
                                
                                <apex:repeat value="{!DescarteInnerClassList}" var="l">                                                 
                                                                                        
                                    <tr id="{!l.RecUniqId}" bgcolor="#F2F2F2">
                                        
                                        <td ondblclick="getSelectedRowValueAddondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')"  onclick="getSelectedRowValueAdd(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" >
                                            <apex:outputText value="{!l.Address1}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueAddondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" onclick="getSelectedRowValueAdd(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" >
                                            <apex:outputText value="{!l.state}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueAddondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" onclick="getSelectedRowValueAdd(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" >
                                            <apex:outputText value="{!l.ZipCode}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueAddondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" onclick="getSelectedRowValueAdd(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" >
                                            <apex:outputText value="{!l.CountryId}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueAddondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" onclick="getSelectedRowValueAdd(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" >
                                            <apex:outputText value="{!l.fulfillingBranch}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueAddondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" onclick="getSelectedRowValueAdd(this.parentNode.id,'{!l.RecUniqId}','selectedAddr','selectAddr_grid')" >
                                            <apex:outputText value="{!l.fulfillingBranchName}" /> 
                                        </td>
                                        
                                    </tr>
                                
                                </apex:repeat>
                                
                            </table>
                      
                        </div> 
                  <br/>
                  <center>    
                      <apex:commandButton value="Ok" status="loginStatus" action="{!FulfillingBranchSelected}" onclick="showTaxPopUp();" reRender="addressValidateError,TaxDivpanelid, fid, dfbId,deliveryZone, crossfId,mv1,mv2,mv3,mv4,viewBranchIdShanshort,addId,zipCode,States,cityid " disabled="{!!qqWrapper.disableAddressOkButton}"/>
                      <apex:commandButton value="Cancel"  status="loginStatus"  onclick="hideshowDescretePopUpHide('descreteAddDiv');" rerender="fulfillingBranchPanel,TaxDiv"/>
                  </center>
                  <br/>
                  </apex:pageblock>
                 
              </apex:outputPanel>
              </div>
              
       <!--  </div>  -->
       <div id="branchsearch" style="display:none;">
       <apex:outputpanel id="branchSearchPanel">
       <apex:outputPanel styleClass="DescAddresspopupBackground" layout="block"  />
                  <apex:outputPanel style="-moz-border-radius: 15px;-webkit-border-radius: 15px;border-radius: 10px;" styleClass="custDescAddressPopup" layout="block" >
                      <br/>  
                      <apex:commandLink onclick="hideBranchSearch();" reRender="formId" >
                          <apex:image style="position:relative;left:700px;" value="{!$Resource.WindowCloseLogo}" width="30" height="30"/>
                      </apex:commandLink>
                      <br/>
                      
                      <apex:outputPanel rendered="{!!qqWrapper.dispBranchPopUp}">
                  <div align="center">
                        <img src="{!$Resource.Loading}" />
                        <br/><br/>
                        <font color="Red"><b>Loading....</b></font>
                    </div>                  
                </apex:outputPanel> 
                
                 
                  <apex:pageblock title="Select a Branch" rendered="{!qqWrapper.dispBranchPopUp}">   
                               
                  <apex:outputLabel value="Branch Id" />&nbsp;&nbsp;
                  <apex:inputText value="{!qqWrapper.BranchIdSearchWord}" >
                    <apex:actionsupport event="onkeyup" action="{!SearchDescAddress}" rerender="out3" />
                  </apex:inputText>&nbsp;&nbsp;&nbsp;&nbsp;
                  <apex:outputLabel value="Branch Name" />&nbsp;&nbsp;
                  <apex:inputText value="{!qqWrapper.BranchNameSearchWord}" >
                    <apex:actionsupport event="onkeyup" action="{!SearchDescAddress}" rerender="out3" />
                  </apex:inputText>&nbsp;&nbsp;&nbsp;&nbsp;
                <!--   <apex:commandButton value="Search" action="{!SearchDescAddress}" reRender="out3"/> -->
                  <br/><br/>  
                  <apex:outputpanel id="out3" >
                 
                     <div id="target3" style="overflow:scroll; width:100%; height:200px;">                
                
                  
                  <apex:outputPanel rendered="{!!qqWrapper.showSearchBranchIdTable}">
                  <!-- <table id="selectBranch_grid" width="100%"> 
                                <tr bgcolor="#F8F8F8">
                                        
                                        <td><b>Branch Id</b></td>
                                        <td><b>Name</b></td>
                                </tr>
                                
                                <apex:repeat value="{!branchList}" var="l">                                                  
                                                                                        
                                     <tr id="{!l.RecUniqId}" bgcolor="#F2F2F2">
                                        
                                        <td ondblclick="getSelectedRowValueBranchondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid')"  onclick="getSelectedRowValueBranch(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid')" >
                                            <apex:outputText value="{!l.Id}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueBranchondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid')" onclick="getSelectedRowValueBranch(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid')" >
                                            <apex:outputText value="{!l.Name}" />
                                        </td>
                                    </tr>
                                </apex:repeat>
                            </table> -->
                            
                             <table  width="100%"> 
                                <tr bgcolor="#F8F8F8" >
                                        
                                        <td width="10%"><b>Branch Id</b></td>
                                        <td width="90%" align="center"><b>Name</b></td>
                                </tr>
                                 <tr >
                                  <td colspan="3" >
                                            <div style="overflow:scroll; width:100%; height:220px;">
                                                <table width="100%" id="selectBranch_grid">
                                 
                                     <apex:repeat value="{!branchList}" var="l">                                                  
                                                                                        
                                     <tr id="{!l.RecUniqId}" bgcolor="#F2F2F2">
                                        
                                        <td ondblclick="getSelectedRowValueBranchondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid')"  onclick="getSelectedRowValueBranch(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid')" >
                                            <apex:outputText value="{!l.Id}" /> 
                                        </td>
                                        
                                        <td align="center" ondblclick="getSelectedRowValueBranchondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid')"  onclick="getSelectedRowValueBranch(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid')" >
                                            <apex:outputText value="{!l.Name}" />
                                        </td>
                                    </tr>
                                </apex:repeat>
                                 </table>
                                    </div>
                                  </td>
                                
                                </tr>
                            </table>
                            
                  </apex:outputPanel>
                  
                  <apex:outputPanel rendered="{!qqWrapper.showSearchBranchIdTable}">
                 <!--  <table id="selectBranch_grid2" width="100%"> 
                                <tr bgcolor="#F8F8F8">
                                        
                                        <td><b>Branch Id</b></td>
                                        <td><b>Name</b></td>
                                </tr>
                                <apex:repeat value="{!branchSearchList}" var="l">                                                                                               
                                    <tr id="{!l.RecUniqId}" bgcolor="#F2F2F2">
                                        
                                        <td ondblclick="getSelectedRowValueBranchondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid')" onclick="getSelectedRowValueBranch(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid2')" >
                                            <apex:outputText value="{!l.Id}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueBranchondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid')" onclick="getSelectedRowValueBranch(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid2')" >
                                            <apex:outputText value="{!l.Name}" />
                                        </td>
                                    </tr>
                                </apex:repeat>
                            </table> -->
                            
                             <table   width="100%"> 
                                <tr bgcolor="#F8F8F8" >
                                        
                                          <td width="10%"><b>Branch Id</b></td>
                                        <td width="90%" align="center"><b>Name</b></td>
                                </tr>
                                
                                 <tr >
                                  <td colspan="3">
                                            <div style="overflow:scroll; width:100%; height:220px;">
                                                <table width="100%" id="selectBranch_grid2">
                                <apex:repeat value="{!branchSearchList}" var="l">                                                                                               
                                    <tr id="{!l.RecUniqId}" bgcolor="#F2F2F2">
                                        
                                        <td ondblclick="getSelectedRowValueBranchondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid2')"  onclick="getSelectedRowValueBranch(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid2')" >
                                            <apex:outputText value="{!l.Id}" /> 
                                        </td>
                                        
                                        <td align="center" ondblclick="getSelectedRowValueBranchondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid2')"  onclick="getSelectedRowValueBranch(this.parentNode.id,'{!l.RecUniqId}','selectedBranch','selectBranch_grid2')" >
                                            <apex:outputText value="{!l.Name}" />
                                        </td>
                                    </tr>
                                </apex:repeat>
                                 </table>
                                    </div>
                                  </td>
                                
                                </tr>
                            </table>
                  </apex:outputPanel>
                  
                  
                  </div>
                  
                  </apex:outputpanel>
                  <br/>
                  <center>    
                      <apex:commandButton value="Ok"  status="LoadBranch" action="{!SelectedBranchMethod}" onclick="selectedBranchId();" reRender="fid, dfbId,deliveryZone, crossfId,mv1,mv2,mv3,mv4,viewBranchIdShanshort,locksection,prodsecid,modifId,deliveryDateId,RefreshButton,SaveId,suggestedPriceId,branchGid,customerTotalid,sellpId,marketId,totalTid,lockTid,errorMsgsec,addressValidateError,shippingadd"/>
                      <apex:commandButton value="Cancel"  onclick="hideBranchSearch();" reRender="formId"/>
                  </center>
                  <br/>
                  </apex:pageblock>
              </apex:outputPanel>
              </apex:outputpanel>
              </div>
            

     <!--   <div id="ProductSearchId" style="display:none;">
              <apex:outputPanel id="propanelid">
                  <apex:outputPanel styleClass="popupBackground1" layout="block"/>
                  <apex:outputPanel style="-moz-border-radius: 15px;-webkit-border-radius: 15px;border-radius: 10px;" styleClass="custPopup1" layout="block">
                      <br/>
                      
                        <apex:commandLink onclick="hideProductSearch();" reRender="propanelid" >
                            <apex:image style="position:relative;left:700px;" value="{!$Resource.WindowCloseLogo}" width="30" height="30"/>
                        </apex:commandLink>
                      <br/> <br/>
                      
                   <apex:outputPanel rendered="{!!DispProductPopUp}">
                  <div align="center">
                        <img src="{!$Resource.Loading}" />
                        <br/><br/>
                        <font color="Red"><b>Loading....</b></font>
                    </div>                  
                </apex:outputPanel> 
                <apex:outputPanel rendered="{!DispProductPopUp}">
                      <apex:pageblock title="Search for products"  rendered="{!DispProductPopUp}">
                      
                       <apex:messages styleClass="errorMsg" style="font-family:georgia,garamond,serif;" rendered="{!DispProductPopUp}"/> <br/>
                      <center>                        
                                
                            <div class="popupborderbox1">                           
                                  <br/>  
                                  <table align="center" width="100%">
                                      <tr>
                                          <td align="center" colspan="2">
                                             <apex:outputLabel value="Search Pattern" />&nbsp;&nbsp;&nbsp;
                                             <apex:inputText style="width:200px;" value="{!qqWrapper.productSearchWord}" />
                                          </td>
                                          <td>&nbsp;</td>
                                          <td>&nbsp;</td>                                         
                                      </tr>
                                      <tr>
                                          <td>&nbsp;</td>
                                          <td>&nbsp;</td>
                                          <td>&nbsp;</td>
                                          <td>&nbsp;</td>
                                      </tr>
                                      <tr>                                          
                                          <td>
                                              <apex:outputLabel value="Product Type" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                              <apex:selectList value="{!qqWrapper.ProductType}" size="1">
                                              <apex:selectOptions value="{!productTypeOptions}" /> 
                                              </apex:selectList> 
                                          </td>
                                          <td>
                                              <apex:outputLabel value="Product Size" />&nbsp;&nbsp;
                                              <apex:selectList value="{!qqWrapper.ProductSize}" size="1">
                                                  <apex:selectOptions value="{!productSizeOptions}" /> 
                                              </apex:selectList> <br/><br/>
                                              <apex:outputLabel value="Primary Only" />&nbsp;&nbsp;
                                              <apex:inputCheckbox value="{!qqWrapper.PrimaryOnly}"/> 
                                          </td>
                                          <td>
                                               &nbsp;&nbsp;<apex:outputLabel value="Product Features" />                                           
                                          </td>
                                          <td>
                                               <apex:inputCheckbox value="{!qqWrapper.SideRollDoors}"/>&nbsp;&nbsp;
                                               <apex:outputLabel value="Side Roll Doors" /><br/>
                                               <apex:inputCheckbox value="{!qqWrapper.EndRollDoors}"/>&nbsp;&nbsp;
                                               <apex:outputLabel value="End Roll Doors" /><br/>                                            
                                               <apex:inputCheckbox value="{!qqWrapper.RecordStorage}"/>&nbsp;&nbsp;
                                               <apex:outputLabel value="Record Storage" /><br/>
                                               <apex:inputCheckbox value="{!qqWrapper.HighCubes}"/>&nbsp;&nbsp;
                                               <apex:outputLabel value="High Cubes" /><br/>
                                               <apex:inputCheckbox value="{!qqWrapper.Shelving}"/>&nbsp;&nbsp;
                                               <apex:outputLabel value="Shelving" /><br/>
                                          </td>
                                      </tr>
                                  </table>
                                  <br/>
                                  <apex:actionStatus id="SearchLoad">
                                    <apex:facet name="stop">
                                        <apex:commandButton value="Search" action="{!ProductSearch}" status="SearchLoad" reRender="propanelid"/>
                                    </apex:facet>
                                    <apex:facet name="start">
                                        <apex:commandButton value="Loading..." styleclass="readmore" disabled="true" status="SearchLoad" />
                                    </apex:facet>
                                </apex:actionStatus>
                                  
                                  <apex:actionStatus id="sts4" > 
                                    <apex:facet name="start">
                                        <apex:image value="{!$Resource.Loading}" width="25" height="25"/>                               
                                    </apex:facet>
                                    <apex:facet name="stop"></apex:facet>                     
                                </apex:actionStatus>
                                  <br/><br/> 
                                 </div>
                          <br/><br/>  
                          <apex:messages styleClass="errorMsg" style="font-family:georgia,garamond,serif;" /> <br/>                                               
                          <br/>
                          <apex:outputpanel id="out1" rendered="{!qqWrapper.ShowProduct}">
    
                     <div id="target1" style="overflow:scroll; width:100%; height:200px;">
                     
                           
                            <table id="selectProd1_grid" width="100%"> 
                                <tr bgcolor="#F8F8F8">
                                    
                                        <td><b>Main Feature</b></td>
                                        <td><b>Item Code</b></td>
                                        <td><b>Description</b></td>
                                        <td><b>QtyAvail</b></td>
                                        <td><b>Rent Ready</b></td>
                                        <td><b>Reserved</b></td>
                                        <td><b>Off Rent Not P.U.</b></td>
                                        <td><b>1 Period</b></td>
                                        <td><b>2-6 Periods</b></td>
                                        <td><b>7-12 Periods</b></td>
                                        <td><b>13+ Periods</b></td>
                                        <td><b>Contractor</b></td>
                                        
                                        
                                </tr>
                                
                                <apex:repeat value="{!innerProductList}" var="l">                                                  
                                                                                        
                                    <tr id="{!l.RecUniqId}" bgcolor="#F2F2F2">
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            <apex:outputText value="{!l.mainFeature}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            <apex:outputText value="{!l.PID}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            <apex:outputText value="{!l.PDescription}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            <apex:outputText value="{!l.PQtyAvail}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            <apex:outputText value="{!l.PRate1}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            <apex:outputText value="{!l.PRate2}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            <apex:outputText value="{!l.PRate3}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            <apex:outputText value="{!l.PRate4}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" >
                                            <apex:outputText value="{!l.PRate5}" />
                                        </td>
                                        
                                        
                                    </tr>
                                </apex:repeat>
                            </table>
                          </div>
                          </apex:outputpanel>
                          
                          <apex:outputpanel id="out2" rendered="{!!qqWrapper.ShowProduct}">
                          
        
                         <div id="target2" style="overflow:scroll; width:100%; height:200px;">
                          
                               <table id="selectProd2_grid" width="100%"> 
                                <tr bgcolor="#F8F8F8">
                                        
                                        <td><b>Main Feature</b></td>
                                        <td><b>Item Code</b></td>
                                        <td><b>Description</b></td>
                                        <td><b>QtyAvail</b></td>
                                        <td><b>Rent Ready</b></td>
                                        <td><b>Reserved</b></td>
                                        <td><b>Off Rent Not P.U.</b></td>
                                        <td><b>1 Period</b></td>
                                        <td><b>2-6 Periods</b></td>
                                        <td><b>7-12 Periods</b></td>
                                        <td><b>13+ Periods</b></td>
                                        <td><b>Contractor</b></td>
                                        
                                </tr>
                                
                                <apex:repeat value="{!innerProductSearchList}" var="l">                                                 
                                                                                        
                                    <tr id="{!l.RecUniqId}" bgcolor="#F2F2F2">

                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            <apex:outputText value="{!l.mainFeature}" /> 
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            <apex:outputText value="{!l.PID}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            <apex:outputText value="{!l.PDescription}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            <apex:outputText value="{!l.PQtyAvail}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            
                                        </td>
                                        
                                        <td onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                        
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            <apex:outputText value="{!l.PRate1}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            <apex:outputText value="{!l.PRate2}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            <apex:outputText value="{!l.PRate3}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            <apex:outputText value="{!l.PRate4}" />
                                        </td>
                                        
                                        <td ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd2_grid')" >
                                            <apex:outputText value="{!l.PRate5}" />
                                        </td>
                                        
                                    </tr>
                                </apex:repeat>
                            </table>
                          </div>
                          </apex:outputpanel>
                      </center> 
                      <center>
                        <br/>
                            <apex:commandButton value="Ok" status="ProductSelection"  onclick="hideProductSearchOK();" reRender="propanelid"/>&nbsp;&nbsp;
                            <apex:commandButton value="Cancel" status="ProductSelection" onclick="hideProductSearch();"  reRender="propanelid"/>
                        <br/>
                      </center>
                      </apex:pageblock> 
                     </apex:outputPanel>
                  </apex:outputPanel>    
              </apex:outputPanel>
              </div> -->
              
              
              
              <div id="ProductSearchId" style="display:none;">
              <apex:outputPanel id="propanelid">
                  <apex:outputPanel styleClass="popupBackground1" layout="block"/>
                  <apex:outputPanel style="-moz-border-radius: 15px;-webkit-border-radius: 15px;border-radius: 10px;" styleClass="custPopup1" layout="block">
                      <br/>
                      
                        <apex:commandLink onclick="hideProductSearch();" reRender="propanelid" >
                            <apex:image style="position:relative;left:700px;" value="{!$Resource.WindowCloseLogo}" width="30" height="30"/>
                        </apex:commandLink>
                      <br/> <br/>
                      
                   <apex:outputPanel rendered="{!!DispProductPopUp}">
                  <div align="center">
                        <img src="{!$Resource.Loading}" />
                        <br/><br/>
                        <font color="Red"><b>Loading....</b></font>
                    </div>                  
                </apex:outputPanel> 
                <apex:outputPanel rendered="{!DispProductPopUp}">
                      <apex:pageblock title="Search for products"  rendered="{!DispProductPopUp}">
                      
                       <apex:messages styleClass="errorMsg" style="font-family:georgia,garamond,serif;" rendered="{!DispProductPopUp}"/> <br/>
                      <center>                        
                                
                            <div class="popupborderbox1">                           
                                  <br/>  
                                  <table align="center" width="100%">
                                      <tr>
                                          <td align="center" colspan="2">
                                             <apex:outputLabel value="Search Pattern" />&nbsp;&nbsp;&nbsp;
                                             <apex:inputText style="width:200px;" value="{!qqWrapper.productSearchWord}" />
                                          </td>
                                          <td>&nbsp;</td>
                                          <td>&nbsp;</td>                                         
                                      </tr>
                            
                                  </table>
                                  <br/>
                                  <apex:actionStatus id="SearchLoad">
                                    <apex:facet name="stop">
                                        <apex:commandButton value="Search" action="{!ProductSearch}" status="SearchLoad" reRender="propanelid"/>
                                    </apex:facet>
                                    <apex:facet name="start">
                                        <apex:commandButton value="Loading..." styleclass="readmore" disabled="true" status="SearchLoad" />
                                    </apex:facet>
                                </apex:actionStatus>
                                  
                                  <apex:actionStatus id="sts4" > 
                                    <apex:facet name="start">
                                        <apex:image value="{!$Resource.Loading}" width="25" height="25"/>                               
                                    </apex:facet>
                                    <apex:facet name="stop"></apex:facet>                     
                                </apex:actionStatus>
                                  <br/><br/> 
                                 </div>
                          <br/><br/>  
                          <apex:messages styleClass="errorMsg" style="font-family:georgia,garamond,serif;" /> <br/>                                               
                          <br/>
                          <apex:outputpanel id="out1" >
    
              
     
                            <table  width="100%">  
                                   
                                   <tr bgcolor="#F8F8F8">   
                                        <td>
              
                                            <table width="100%;">
                                                    <tr>
                                                    <td  align="center" width="8%"><b>Branch Number</b></td>
                                                    <td  align="center" width="8%"><b>Item Code</b></td>
                                                    <td  align="center" width="8%"><b>E-Code</b></td>
                                                    <td  align="center" width="8%"><b>Item Ref(Serial No.)</b></td>
                                                    <td  align="center" width="8%"><b>Grade</b></td>
                                                    <td  align="center" width="8%"><b>Sugg Price</b></td>
                                                    <td  align="center" width="8%"><b>Min Price</b></td>    
                                                    <td  align="center" width="8%"><b>Area</b></td> 
                                                    <td  align="center" width="8%"><b>Reason Code</b></td>
                                                    <td  align="center" width="8%"><b>Blowout</b></td>
                                                    <td  align="center" width="20%"><b>Note</b></td>
                                                    </tr>
                                                </table>
                                        
                                        </td>
        
                                    </tr>
                                    <tr> 
                                        <td colspan="13" >
                                            <div style="overflow:scroll; width:100%; height:220px;">
                                                <table width="100%" id="selectProd1_grid">
                                                    <apex:repeat value="{!salesInventories}" var="l">
                                                        <tr id="{!l.RecUniqId}" bgcolor="#F2F2F2">
                                                            <td align="center" width="8%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.fulfillingBranchCode}" />
                                                            </td>
                                                            <td align="center" width="8%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.lineItemID}" />
                                                            </td>
                                                            <td align="center" width="8%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.eCode}" />
                                                            </td>
                                                            <td align="center" width="8%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.itemRef}" />
                                                            </td>
                                                            <td align="center" width="8%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.gradeCode}" />
                                                            </td>
                                                            <td align="center" width="8%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.suggestedPrice}" />
                                                            </td>
                                                            <td align="center" width="8%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.minimumPrice}" />
                                                            </td>
                                                            <td align="center" width="8%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.area}" />
                                                            </td>
                                                            <td align="center" width="8%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.reasonCode}" />
                                                            </td>
                                                            <td align="center" width="8%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.blowout}" />
                                                            </td>
                                                            <td align="center" width="20%"  ondblclick="getSelectedRowValueProdondblclick(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')" onclick="getSelectedRowValueProd(this.parentNode.id,'{!l.RecUniqId}','selectedProd','selectProd1_grid')"  >
                                                                <apex:outputText value="{!l.notes}" />
                                                            </td>
                                 
                                                        </tr>
                                                        
                                                   </apex:repeat>
                                                </table>
                                            </div>
                                        </td>
                                    </tr>
                          </table>                  
                
                          
                          </apex:outputpanel>
     
                      </center> 
                      <center>
                        <br/>
                          <!--   <apex:commandButton value="Ok" status="ProductSelection"  onclick="hideProductSearchOK();" reRender="propanelid"/>&nbsp;&nbsp;
                            -->
                           <input type="Button" value="Ok" onclick="hideProductSearchOK();"/> &nbsp;&nbsp;
                           
                            <apex:commandButton value="Cancel" status="ProductSelection" onclick="hideProductSearch();"  reRender="propanelid"/>
                        <br/>
                      </center>
                      </apex:pageblock> 
                     </apex:outputPanel>
                  </apex:outputPanel>    
              </apex:outputPanel>
              </div>
      
              <!------------- capacity lookup popups ---------->
                    <div id="capacityLookupPopupId" style="display:none;">
                     <apex:outputpanel id="CapacityLookupPanel">
                           <apex:outputPanel styleClass="DescAddresspopupBackground" layout="block" />
                           <apex:outputPanel styleClass="custDescAddressPopup" layout="block" >                             
                                 
                                   <apex:commandLink action="{!hideCapacitylookupPop}" reRender="CapacityLookupPanel" onclick="hideCancelcapacityLookupPopUp();">
                                       <apex:image style="position:relative;left:700px;" value="{!$Resource.WindowCloseLogo}" width="30" height="30"/>
                                   </apex:commandLink>
                                                                   
                                  <apex:outputPanel rendered="{!!isShowcapacityLookupPopUp}"> 
                                      <div align="center">
                                          <img src="{!$Resource.Loading}" />
                                          <br/><br/>
                                          <font color="Red"><b>Loading....</b></font>
                                      </div>                    
                                  </apex:outputPanel> 
                                
                                  <apex:pageblock id="CapacityLookupPBTableId" title="Capacity Lookup" rendered="{!isShowcapacityLookupPopUp}">  
                                            
                                        <div style="overflow:scroll; width:100%; height:200px;">
                                            
                                            <table id="capacityLookup_grid" width="100%"> 
                                                
                                                <tr bgcolor="#F8F8F8">                                                  
                                                    <td><b>Date</b></td>
                                                    <td><b>mileage</b></td>
                                                    <td><b>storeNumber</b></td>
                                                    <td><b>storeType</b></td>
                                                    <td><b>depotGroup</b></td>
                                                    <td><b>amCapacity</b></td>
                                                    <td><b>pmCapacity</b></td>
                                                    <td><b>noPrefCapacity</b></td>
                                                </tr>
                                                                                                
                                                <apex:repeat value="{!CapacityLookupList}" var="l" >
                                                    <tr id="{!l.dateVal}" bgcolor="#F2F2F2">
                                                        <td ondblClick="changeRowColorInCapacityDblClk(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" onclick="changeRowColorInCapacity(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" >
                                                            <apex:outputText value="{!l.dateVal}" />
                                                        </td>
                                                        <td ondblClick="changeRowColorInCapacityDblClk(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" onclick="changeRowColorInCapacity(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" >
                                                            <apex:outputText value="{!l.mileage}" />
                                                        </td>
                                                        <td ondblClick="changeRowColorInCapacityDblClk(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" onclick="changeRowColorInCapacity(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" >
                                                            <apex:outputText value="{!l.storeNumber}" />
                                                        </td>
                                                        <td ondblClick="changeRowColorInCapacityDblClk(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" onclick="changeRowColorInCapacity(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" >
                                                            <apex:outputText value="{!l.storeType}" />
                                                        </td>
                                                        <td ondblClick="changeRowColorInCapacityDblClk(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" onclick="changeRowColorInCapacity(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" >
                                                            <apex:outputText value="{!l.depotGroup}" />
                                                        </td>
                                                        <td ondblClick="changeRowColorInCapacityDblClk(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" onclick="changeRowColorInCapacity(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" >
                                                            <apex:outputText style="color:{!if(l.amCapacity = '0' ,'red','')}" value="{!l.amCapacity}"/>
                                                        </td>
                                                        <td ondblClick="changeRowColorInCapacityDblClk(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" onclick="changeRowColorInCapacity(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" >
                                                            <apex:outputText style="color:{!if(l.pmCapacity = '0' ,'red','')}"  value="{!l.pmCapacity}"/>
                                                        </td>
                                                        <td ondblClick="changeRowColorInCapacityDblClk(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" onclick="changeRowColorInCapacity(document.getElementById('{!l.dateVal}'),'{!l.dateVal}','capacitySelactedValue');" >
                                                            <apex:outputText style="color:{!if(l.noPrefCapacity = '0' ,'red','')}" value="{!l.noPrefCapacity}"/>
                                                        </td>  
                                                    </tr>
                                                </apex:repeat> 
                                            </table>                                            
                                        </div>    
                                        <br/>
                                        <center>
                                            <div  id="CapacityDivEnable" style="display:none; width: 50%;" > 
                                                <apex:commandButton value="Ok" action="{!CapacityIdSelected}" onclick="hideCapacityPopUp();"  reRender="CapacityLookupPanel,deliveryDateInputId,wwynyuId"/>                                          
                                                <apex:commandButton value="Cancel"  action="{!hideCapacitylookupPop}" onclick="hideCancelcapacityLookupPopUp();" reRender="CapacityLookupPanel,errorMessageTop"/>
                                            </div>   
                                            <div  id="CapacityDivDisable" >
                                                <apex:commandButton value="Ok" disabled="true" action="{!CapacityIdSelected}" onclick="hideCapacityPopUp();" reRender="CapacityLookupPanel,deliveryDatePanelId,deliveryDateInputId,wwynyuId"/>                                           
                                                <apex:commandButton value="Cancel"  action="{!hideCapacitylookupPop}" onclick="hideCancelcapacityLookupPopUp();" reRender="CapacityLookupPanel,errorMessageTop"/>
                                            </div>
                                        </center>
                                        
                                  </apex:pageblock>
                                                                        
                           </apex:outputPanel>
                     </apex:outputpanel>
                 </div> 
      
       </apex:pageBlock>
       </apex:outputPanel> 
      </apex:outputPanel> 
    </apex:form> 
    
</apex:page>